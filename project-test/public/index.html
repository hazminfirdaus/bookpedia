<!DOCTYPE html>
<html lang="en" x-data="auth()">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Put Together</title>
  <script src="https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.x.x/dist/alpine.min.js" defer></script>
</head>
<body>

  <h1>Book Catalogue</h1>
  <!-- Book Management Section -->
  <div x-show="isAdmin">
    <div id="bookManagement">
      <h2>Book Management</h2>
      <!-- Conditional rendering for management buttons -->
      <div>
        <button @click="toggleEditMode">Toggle Edit Mode</button>
        <button @click="toggleAddMode">Add New Book</button>
        <!-- Other management buttons -->
      </div>
    </div>
  </div>

<!-- Login/Logout Form -->
<form x-on:submit.prevent="login()" id="authForm">
  <button type="button" x-show="isAdmin" x-on:click="logout()" id="logoutBtn">Logout</button>
</form>

    <div v-if="books.length > 0">
      <h2>All Books</h2>
      <ul>
        <li v-for="book in books" :key="book.uuid">
          {{ book.title }} by {{ book.author }} ({{ book.genre }})
        </li>
      </ul>
    </div>

  <!-- Add Book Form -->
  <form x-show="isAddingBook" x-on:submit.prevent="addBook()">
    <h2>Add New Book</h2>
    <label for="newTitle">Title:</label>
    <input type="text" id="newTitle" x-model="newTitle" required><br>
    <label for="newAuthor">Author:</label>
    <input type="text" id="newAuthor" x-model="newAuthor" required><br>
    <label for="newGenre">Genre:</label>
    <input type="text" id="newGenre" x-model="newGenre" required><br>
    <button type="submit">Save Book</button>
    <button type="button" @click="cancelAdd">Cancel</button>
  </form>

  <!-- Edit Book Form -->
  <form x-show="isAdmin" x-on:submit.prevent="saveEdit()">
    <h2>Edit Book</h2>
    <label for="editTitle">Title:</label>
    <input type="text" id="editTitle" x-model="editTitle" required><br>
    <label for="editAuthor">Author:</label>
    <input type="text" id="editAuthor" x-model="editAuthor" required><br>
    <label for="editGenre">Genre:</label>
    <input type="text" id="editGenre" x-model="editGenre" required><br>
    <button type="submit">Save Changes</button>
    <button type="button" @click="cancelEdit">Cancel</button>
  </form>

  <!-- Delete Book Form -->
  <form x-show="isAdmin" x-on:submit.prevent="deleteBook()">
    <h2>Delete Book</h2>
    <p>Are you sure you want to delete "{{ deleteTitle }}"?</p>
    <button type="submit">Delete</button>
    <button type="button" @click="cancelDelete">Cancel</button>
  </form>

  <script src="app.js"></script>
</body>
</html>
