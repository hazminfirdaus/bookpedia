function auth() {
  return {
    data() {
      return {
        username: '',
        password: '',
        isLoggedIn: false,
        isLoading: true,
        books: [],
        
        async initializeAuth() {
            this.isLoggedIn = localStorage.getItem('token') !== null;
            this.isLoading = false;
          },
      };
    },
    mounted() {
      this.fetchBooks();
    },
    methods: {
      // Other methods like register, login, logout, testProtectedRoute, etc.

      async fetchBooks() {
        try {
          const response = await fetch('api/books');
          if (!response.ok) {
            throw new Error('Failed to fetch books');
          }
          this.books = await response.json();
        } catch (error) {
          console.error('Error fetching books:', error);
        }
      }
    }
  };
}
